---
tags:
  - meet
  - todo
  - "#prog"
date: 2025-03-26
dg-publish: true
---
# Память
Пусть у нпс есть память, он помнит объекты (иллюзии, предметы, строения) и строит решения в зависимости от памяти
## Временная
Память (временная):
- Видишь объект- добавляешь / обновляешь его в памяти
- Делаем слепок объекта: тег и место. У самого объекта будут теги, которые реально относятся к нему 
- Если слепок не обновлялся нек.время, он забывается
! Время может быть любым => временная память может быть постоянной

А что будет, если он ищет того, чего не помнит?
- НПС могут общаться (вопрос-ответ, заявление)
- Столбы-указатели
- Случайно гулять, пока не нашёл
NOTE: Можно ебашить иллюзии общения / приглушения звука, иллюзии столбов-указателей (?)
## Постоянная
Но что будет, если он забудет какую-то важную инфу? Мб надо сделать так, чтобы он не мог этого забыть и постоянную память ебануть параллельно со временной? **Пока не надо**
# Объекты
## Способы взаимодействия НПС с объектами
- Придти к  
- Отреагировать на наличие (изменить свою навигационную сеть: добавить или убрать из неё)  
- Отреагировать на отсутствие в точке
	- Делаем объект невидимым, не мешаем перемещению, даем тег "отсутствует". НПС может заметить объект, по ссылке выяснить, помнит ли он о нём. Если помнит, то проверить тег "отсутствует" у самого объекта. Если он есть, то реагируем на отсутствие.
// - Отреагировать на отсутствие в области
- Реакция на исчезновение
- Реакция на появление

НПС носит воду, если её нет рядом: постоянная реакция на отсутствие в области: руками задаём область. **Не, хуйня: если вода слишком далеко, то приносим воду в ту точку**
Ок, а если я хочу, чтобы НПС носил воду, если её нет (по его памяти) в конкретном регионе?

Как ему увидеть область?
# Поиск
Можно наложить смешное ограничение: искать только по 1 тегу. Если дойдёт до того, что искать НАДО будет по нескольким, тогда и будем думать.
## Алгоритм А*
На каждой клетке ёбаем эвристику до каждого целевого объекта, берём минимальное и считаем расстояние как эвристика + настоящее
# Работа А* на не клетчатой карте
Карта дробится на полигоны. Вершины полигонов образуют граф, и алгоритм работает с вершинами этого графа. 
# Проблемы
- Прижимание неписей к стенам
- Сглаживание пути (более человеческое)
- Туман войны? Думаю нет, с ним игрок не сможет видеть плоды своих действий.
- Иллюзия на часть объекта (???)
- НПС - объекты? **Пока хз. Как будто и НПС, и ГГ должны ими быть для единообразия** 
- Эффект такого 2D в 3D, но остаться в 2D?
![[Gone Rogue Gameplay.jpg]] 
# Теги 
- Делаем декартовую бесклеточную систему, привязываем теги к объектам, а не к территории
- У каждого объекта будут теги
- У стенок тега нет, они просто задают навигационную сетку по умолчанию
- У нас есть примеры с вёдрами и водой. Как нам обрабатывать процесс этих вёдер? 
1) Ведро- это объект, у него есть теги. НПС (и мб игрок) могут подобрать ведро. Тогда, получается, воду (т.е. какой-то объект) можно взять только с ведром.
2) Ведро воды- это просто изображение объекта с тегом "вода", ведро как бы изниоткуда появляется. **(пока такое)**

NOTE: Пора делать поведение без иллюзии
